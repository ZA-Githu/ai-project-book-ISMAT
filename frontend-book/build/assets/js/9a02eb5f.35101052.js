"use strict";(globalThis.webpackChunkbook_frontend=globalThis.webpackChunkbook_frontend||[]).push([[183],{2983(e,s,i){i.r(s),i.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>t,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"module-1-robotic-nervous-system/chapter-2-nodes-topics-services","title":"Chapter 2: Nodes, Topics, and Services with rclpy","description":"Learning Objectives","source":"@site/docs/module-1-robotic-nervous-system/chapter-2-nodes-topics-services.md","sourceDirName":"module-1-robotic-nervous-system","slug":"/module-1-robotic-nervous-system/chapter-2-nodes-topics-services","permalink":"/docs/module-1-robotic-nervous-system/chapter-2-nodes-topics-services","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-robotic-nervous-system/chapter-2-nodes-topics-services.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 1: ROS 2 as the Robotic Nervous System","permalink":"/docs/module-1-robotic-nervous-system/chapter-1-ros2-nervous-system"},"next":{"title":"Chapter 3: Humanoid Description with URDF","permalink":"/docs/module-1-robotic-nervous-system/chapter-3-urdf-humanoid"}}');var o=i(4848),r=i(8453);const t={sidebar_position:3},c="Chapter 2: Nodes, Topics, and Services with rclpy",a={},l=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Nodes: The Building Blocks",id:"nodes-the-building-blocks",level:2},{value:"Topics: Publish-Subscribe Communication",id:"topics-publish-subscribe-communication",level:2},{value:"Example Data Flow",id:"example-data-flow",level:3},{value:"Services: Request-Response Communication",id:"services-request-response-communication",level:2},{value:"Python rclpy Examples",id:"python-rclpy-examples",level:2},{value:"Communication Patterns",id:"communication-patterns",level:2},{value:"Topic vs Service Usage Scenarios",id:"topic-vs-service-usage-scenarios",level:2},{value:"Topic Scenarios",id:"topic-scenarios",level:3},{value:"Service Scenarios",id:"service-scenarios",level:3},{value:"Communication Loops in Humanoid Robots",id:"communication-loops-in-humanoid-robots",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"chapter-2-nodes-topics-and-services-with-rclpy",children:"Chapter 2: Nodes, Topics, and Services with rclpy"})}),"\n",(0,o.jsx)(s.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,o.jsx)(s.p,{children:"After completing this chapter, you will be able to:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Explain the concepts of nodes, topics, and services"}),"\n",(0,o.jsx)(s.li,{children:"Understand how data flows from sensors to actuators"}),"\n",(0,o.jsx)(s.li,{children:"Distinguish between topic and service usage scenarios"}),"\n",(0,o.jsx)(s.li,{children:"Use minimal Python rclpy snippets for illustration"}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"nodes-the-building-blocks",children:"Nodes: The Building Blocks"}),"\n",(0,o.jsx)(s.p,{children:"In ROS 2, nodes are the fundamental building blocks of a distributed robotic system. Each node is typically responsible for a specific function such as sensor data processing, path planning, or actuator control. Nodes are designed to be modular and reusable, allowing complex robotic behaviors to be built from simpler components."}),"\n",(0,o.jsx)(s.p,{children:"A node can be thought of as an individual organism in a larger robotic ecosystem. Just as organs in a biological system have specialized functions, nodes in a ROS 2 system handle specific aspects of robotic operation."}),"\n",(0,o.jsx)(s.h2,{id:"topics-publish-subscribe-communication",children:"Topics: Publish-Subscribe Communication"}),"\n",(0,o.jsx)(s.p,{children:"Topics provide a publish-subscribe communication mechanism in ROS 2. This is an asynchronous communication pattern where:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Publishers send messages to topics without knowing which subscribers exist"}),"\n",(0,o.jsx)(s.li,{children:"Subscribers receive messages from topics without knowing which publishers exist"}),"\n",(0,o.jsx)(s.li,{children:"Multiple publishers and subscribers can interact on the same topic"}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"This pattern is ideal for sensor data, where many components might need to receive the same information simultaneously, such as camera images, laser scans, or IMU readings."}),"\n",(0,o.jsx)(s.h3,{id:"example-data-flow",children:"Example Data Flow"}),"\n",(0,o.jsx)(s.p,{children:"Consider a humanoid robot walking scenario:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Sensor nodes publish joint position, IMU, and camera data to their respective topics"}),"\n",(0,o.jsx)(s.li,{children:"Perception nodes subscribe to sensor topics and publish processed information"}),"\n",(0,o.jsx)(s.li,{children:"Planning nodes subscribe to perception data and publish desired movements"}),"\n",(0,o.jsx)(s.li,{children:"Control nodes subscribe to desired movements and send commands to actuators"}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"services-request-response-communication",children:"Services: Request-Response Communication"}),"\n",(0,o.jsx)(s.p,{children:"Services provide a synchronous request-response communication pattern in ROS 2. This is suitable for operations that require immediate responses, such as:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Parameter configuration"}),"\n",(0,o.jsx)(s.li,{children:"Transform lookups"}),"\n",(0,o.jsx)(s.li,{children:'Service calls to specific capabilities (e.g., "find an object" or "plan a path")'}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"Unlike topics, services establish a direct connection between the client and server for each request, making them appropriate for on-demand operations."}),"\n",(0,o.jsx)(s.h2,{id:"python-rclpy-examples",children:"Python rclpy Examples"}),"\n",(0,o.jsx)(s.p,{children:"For Python-based nodes, rclpy provides the ROS 2 client library:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World'\n        self.publisher.publish(msg)\n"})}),"\n",(0,o.jsx)(s.p,{children:"For subscribers:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:"class MinimalSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n"})}),"\n",(0,o.jsx)(s.h2,{id:"communication-patterns",children:"Communication Patterns"}),"\n",(0,o.jsx)(s.p,{children:"The choice between topics and services depends on the use case:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Use ",(0,o.jsx)(s.strong,{children:"topics"})," for continuous data streams (sensors, robot state)"]}),"\n",(0,o.jsxs)(s.li,{children:["Use ",(0,o.jsx)(s.strong,{children:"services"})," for on-demand operations (configuration, specific tasks)"]}),"\n",(0,o.jsxs)(s.li,{children:["Use ",(0,o.jsx)(s.strong,{children:"actions"})," for long-running tasks with feedback (navigation, manipulation)"]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"topic-vs-service-usage-scenarios",children:"Topic vs Service Usage Scenarios"}),"\n",(0,o.jsx)(s.h3,{id:"topic-scenarios",children:"Topic Scenarios"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Sensor data broadcasting (camera feeds, laser scans)"}),"\n",(0,o.jsx)(s.li,{children:"Robot state publication (joint positions, battery level)"}),"\n",(0,o.jsx)(s.li,{children:"Event notifications (obstacle detected, goal reached)"}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"service-scenarios",children:"Service Scenarios"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Requesting specific information (current location, map)"}),"\n",(0,o.jsx)(s.li,{children:"Triggering specific behaviors (take photo, calibrate sensor)"}),"\n",(0,o.jsx)(s.li,{children:"Configuration changes (change parameters, switch modes)"}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"communication-loops-in-humanoid-robots",children:"Communication Loops in Humanoid Robots"}),"\n",(0,o.jsx)(s.p,{children:"In humanoid robots, communication loops typically involve:"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsx)(s.li,{children:"Sensor nodes continuously publishing data via topics"}),"\n",(0,o.jsx)(s.li,{children:"Perception nodes subscribing to sensor data and publishing processed information"}),"\n",(0,o.jsx)(s.li,{children:"Decision-making nodes receiving processed data and publishing commands"}),"\n",(0,o.jsx)(s.li,{children:"Control nodes receiving commands and publishing to actuator interfaces"}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"This creates a continuous flow of information from sensing through action, enabling the robot to respond to its environment in real-time."}),"\n",(0,o.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsx)(s.p,{children:"Nodes, topics, and services form the fundamental communication architecture of ROS 2. Understanding these concepts is essential for developing distributed robotic applications where multiple software components must coordinate effectively. The publish-subscribe model of topics works well for continuous data streams, while the request-response model of services is appropriate for on-demand operations."})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,s,i){i.d(s,{R:()=>t,x:()=>c});var n=i(6540);const o={},r=n.createContext(o);function t(e){const s=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);